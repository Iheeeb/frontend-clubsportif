import{j as e,C as M,U as S,r as c,u as C,e as k}from"./index-Bs0fCrva.js";import{L as R,M as $}from"./message-square-BkiXg1IG.js";import{U as A}from"./user-check-CpJSnBtr.js";function D({user:s,onLogout:t}){return e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900",children:"Tableau de bord Coach"}),e.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",s.prenom," ",s.nom]})]}),e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(R,{className:"w-5 h-5"}),"Déconnexion"]})]})})}function F({currentView:s,onViewChange:t}){return e.jsx("nav",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 space-y-2",children:[e.jsxs("button",{onClick:()=>t("seances"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${s==="seances"?"bg-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(M,{className:"w-5 h-5"}),"Mes séances"]}),e.jsxs("button",{onClick:()=>t("absences"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${s==="absences"?"bg-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(A,{className:"w-5 h-5"}),"Absences"]}),e.jsxs("button",{onClick:()=>t("messages"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${s==="messages"?"bg-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx($,{className:"w-5 h-5"}),"Messages"]})]})})}function q({seances:s,membres:t,selectedSeance:x,onSelectSeance:d,onMarquerAbsent:g}){const u=r=>{const n=s.find(i=>i.id===r);return n?t.filter(i=>n.inscrits.includes(i.id)):[]};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-gray-900",children:"Mon planning"}),e.jsx("div",{className:"space-y-4",children:s.map(r=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-2",children:r.sport}),e.jsxs("div",{className:"flex gap-4 text-gray-600",children:[e.jsx("span",{children:r.date}),e.jsxs("span",{children:[r.heureDebut," - ",r.heureFin]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-gray-900",children:[r.inscrits.length," / ",r.capacite]}),e.jsx("p",{className:"text-gray-500",children:"inscrits"})]})]}),e.jsxs("button",{onClick:()=>d(x===r.id?null:r.id),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),x===r.id?"Masquer les participants":"Voir les participants"]})]}),x===r.id&&e.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 p-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:"Participants inscrits"}),e.jsx("div",{className:"space-y-2",children:u(r.id).map(n=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[e.jsxs("span",{className:"text-gray-900",children:[n.prenom," ",n.nom]}),e.jsx("button",{onClick:()=>g(r.id,n.id),className:"px-3 py-1 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:"Marquer absent"})]},n.id))})]})]},r.id))})]})}function L({absences:s}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-gray-900",children:"Historique des absences"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Membre"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Sport"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Enregistré par"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:t.membreNom}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.sport}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.date}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.enregistrePar})]},t.id))})]}),s.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Aucune absence enregistrée"})]})]})}function P({messages:s,onSendMessage:t,onReplyMessage:x}){const[d,g]=c.useState(!1),[u,r]=c.useState(null),[n,i]=c.useState({destinataire:"",sujet:"",contenu:""}),[j,b]=c.useState(""),v=()=>{t({expediteur:"",expediteurRole:"Coach",contenu:n.contenu}),i({destinataire:"",sujet:"",contenu:""}),g(!1)},y=a=>{x(a,{expediteur:"",expediteurRole:"Coach",contenu:j}),b(""),r(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-gray-900",children:"Messagerie"}),e.jsx("button",{onClick:()=>g(!d),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Nouveau message"})]}),d&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:"Nouveau message"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Destinataire"}),e.jsx("input",{type:"text",value:n.destinataire,onChange:a=>i({...n,destinataire:a.target.value}),placeholder:"Nom du destinataire",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Sujet"}),e.jsx("input",{type:"text",value:n.sujet,onChange:a=>i({...n,sujet:a.target.value}),placeholder:"Sujet du message",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{value:n.contenu,onChange:a=>i({...n,contenu:a.target.value}),placeholder:"Votre message...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Envoyer"}),e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:[a.expediteur," (",a.expediteurRole,")"]}),e.jsx("p",{className:"text-gray-500",children:a.date})]})}),e.jsx("p",{className:"text-gray-700 mb-3",children:a.contenu}),a.reponses&&a.reponses.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:a.reponses.map(o=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"text-gray-900",children:[o.expediteur," (",o.expediteurRole,")"]}),e.jsx("p",{className:"text-gray-700",children:o.contenu}),e.jsx("p",{className:"text-gray-500",children:o.date})]},o.id))}),e.jsx("button",{onClick:()=>r(u===a.id?null:a.id),className:"px-4 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg",children:"Répondre"}),u===a.id&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("textarea",{value:j,onChange:o=>b(o.target.value),placeholder:"Votre réponse...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(a.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Envoyer la réponse"}),e.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"})]})]})]},a.id))})})]})}function U(){const{user:s,logout:t}=C(),x=k(),[d,g]=c.useState("seances"),[u,r]=c.useState(null),n=()=>{t(),x("/")},i=[{id:"1",nom:"Durand",prenom:"Marie"},{id:"2",nom:"Bernard",prenom:"Paul"},{id:"3",nom:"Petit",prenom:"Sophie"},{id:"4",nom:"Moreau",prenom:"Lucas"},{id:"5",nom:"Laurent",prenom:"Emma"}],j=[{id:"1",sport:"Football",date:"2025-12-05",heureDebut:"14:00",heureFin:"16:00",capacite:20,inscrits:["1","2","3","4"]},{id:"2",sport:"Football",date:"2025-12-07",heureDebut:"16:00",heureFin:"18:00",capacite:20,inscrits:["1","2","5"]},{id:"3",sport:"Football",date:"2025-12-10",heureDebut:"14:00",heureFin:"16:00",capacite:20,inscrits:["2","3","4","5"]}],[b,v]=c.useState([{id:"1",seanceId:"1",membreId:"2",membreNom:"Paul Bernard",date:"2025-11-28",sport:"Football",enregistrePar:s.prenom+" "+s.nom}]),[y,a]=c.useState([{id:"1",expediteur:"Admin - Super Admin",expediteurRole:"Admin",contenu:"Le matériel supplémentaire pour vendredi a été commandé. Il sera disponible jeudi.",date:"Il y a 1 jour"},{id:"2",expediteur:"Marie Durand",expediteurRole:"Membre",contenu:"Bonjour, pouvez-vous me confirmer l'horaire de la séance de samedi ?",date:"Il y a 3 jours"}]),o=(p,h)=>{const m=j.find(N=>N.id===p),l=i.find(N=>N.id===h);if(m&&l){const N={id:Date.now().toString(),seanceId:p,membreId:h,membreNom:`${l.prenom} ${l.nom}`,date:m.date,sport:m.sport,enregistrePar:`${s.prenom} ${s.nom}`};v([...b,N]),alert(`${l.prenom} ${l.nom} a été marqué absent pour la séance du ${m.date}`)}},f=p=>{const h={...p,id:Date.now().toString(),expediteur:`${s.prenom} ${s.nom}`,date:"Maintenant"};a([...y,h])},w=(p,h)=>{const m={...h,id:Date.now().toString(),expediteur:`${s.prenom} ${s.nom}`,date:"Maintenant"};a(y.map(l=>l.id===p?{...l,reponses:[...l.reponses||[],m]}:l))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(D,{user:s,onLogout:n}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(F,{currentView:d,onViewChange:g}),e.jsxs("main",{className:"lg:col-span-3",children:[d==="seances"&&e.jsx(q,{seances:j,membres:i,selectedSeance:u,onSelectSeance:r,onMarquerAbsent:o}),d==="absences"&&e.jsx(L,{absences:b}),d==="messages"&&e.jsx(P,{messages:y,onSendMessage:f,onReplyMessage:w})]})]})})]})}export{U as CoachDashboard};
